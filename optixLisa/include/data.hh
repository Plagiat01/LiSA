#include <cuda_runtime.h>

int width  = 1000;
int height = 1000;
int samples_per_launch = 16;

const int VERTICE_COUNT = 32 * 3;
const int MAT_COUNT      = 4;

const static float4 vertices[] =
{
  // Floor  -- white lambert
  {    0.0f,    0.0f,    0.0f, 0.0f },
  {    0.0f,    0.0f,  559.2f, 0.0f },
  {  556.0f,    0.0f,  559.2f, 0.0f },
  {    0.0f,    0.0f,    0.0f, 0.0f },
  {  556.0f,    0.0f,  559.2f, 0.0f },
  {  556.0f,    0.0f,    0.0f, 0.0f },

  // Ceiling -- white lambert
  {    0.0f,  548.8f,    0.0f, 0.0f },
  {  556.0f,  548.8f,    0.0f, 0.0f },
  {  556.0f,  548.8f,  559.2f, 0.0f },

  {    0.0f,  548.8f,    0.0f, 0.0f },
  {  556.0f,  548.8f,  559.2f, 0.0f },
  {    0.0f,  548.8f,  559.2f, 0.0f },

  // Back wall -- white lambert
  {    0.0f,    0.0f,  559.2f, 0.0f },
  {    0.0f,  548.8f,  559.2f, 0.0f },
  {  556.0f,  548.8f,  559.2f, 0.0f },

  {    0.0f,    0.0f,  559.2f, 0.0f },
  {  556.0f,  548.8f,  559.2f, 0.0f },
  {  556.0f,    0.0f,  559.2f, 0.0f },

  // Right wall -- green lambert
  {    0.0f,    0.0f,    0.0f, 0.0f },
  {    0.0f,  548.8f,    0.0f, 0.0f },
  {    0.0f,  548.8f,  559.2f, 0.0f },

  {    0.0f,    0.0f,    0.0f, 0.0f },
  {    0.0f,  548.8f,  559.2f, 0.0f },
  {    0.0f,    0.0f,  559.2f, 0.0f },

  // Left wall -- red lambert
  {  556.0f,    0.0f,    0.0f, 0.0f },
  {  556.0f,    0.0f,  559.2f, 0.0f },
  {  556.0f,  548.8f,  559.2f, 0.0f },

  {  556.0f,    0.0f,    0.0f, 0.0f },
  {  556.0f,  548.8f,  559.2f, 0.0f },
  {  556.0f,  548.8f,    0.0f, 0.0f },

  // Short block -- white lambert
  {  130.0f,  165.0f,   65.0f, 0.0f },
  {   82.0f,  165.0f,  225.0f, 0.0f },
  {  242.0f,  165.0f,  274.0f, 0.0f },

  {  130.0f,  165.0f,   65.0f, 0.0f },
  {  242.0f,  165.0f,  274.0f, 0.0f },
  {  290.0f,  165.0f,  114.0f, 0.0f },

  {  290.0f,    0.0f,  114.0f, 0.0f },
  {  290.0f,  165.0f,  114.0f, 0.0f },
  {  240.0f,  165.0f,  272.0f, 0.0f },

  {  290.0f,    0.0f,  114.0f, 0.0f },
  {  240.0f,  165.0f,  272.0f, 0.0f },
  {  240.0f,    0.0f,  272.0f, 0.0f },

  {  130.0f,    0.0f,   65.0f, 0.0f },
  {  130.0f,  165.0f,   65.0f, 0.0f },
  {  290.0f,  165.0f,  114.0f, 0.0f },

  {  130.0f,    0.0f,   65.0f, 0.0f },
  {  290.0f,  165.0f,  114.0f, 0.0f },
  {  290.0f,    0.0f,  114.0f, 0.0f },

  {   82.0f,    0.0f,  225.0f, 0.0f },
  {   82.0f,  165.0f,  225.0f, 0.0f },
  {  130.0f,  165.0f,   65.0f, 0.0f },

  {   82.0f,    0.0f,  225.0f, 0.0f },
  {  130.0f,  165.0f,   65.0f, 0.0f },
  {  130.0f,    0.0f,   65.0f, 0.0f },

  {  240.0f,    0.0f,  272.0f, 0.0f },
  {  240.0f,  165.0f,  272.0f, 0.0f },
  {   82.0f,  165.0f,  225.0f, 0.0f },

  {  240.0f,    0.0f,  272.0f, 0.0f },
  {   82.0f,  165.0f,  225.0f, 0.0f },
  {   82.0f,    0.0f,  225.0f, 0.0f },

  // Tall block -- white lambert
  {  423.0f,  330.0f,  247.0f, 0.0f },
  {  265.0f,  330.0f,  296.0f, 0.0f },
  {  314.0f,  330.0f,  455.0f, 0.0f },

  {  423.0f,  330.0f,  247.0f, 0.0f },
  {  314.0f,  330.0f,  455.0f, 0.0f },
  {  472.0f,  330.0f,  406.0f, 0.0f },

  {  423.0f,    0.0f,  247.0f, 0.0f },
  {  423.0f,  330.0f,  247.0f, 0.0f },
  {  472.0f,  330.0f,  406.0f, 0.0f },

  {  423.0f,    0.0f,  247.0f, 0.0f },
  {  472.0f,  330.0f,  406.0f, 0.0f },
  {  472.0f,    0.0f,  406.0f, 0.0f },

  {  472.0f,    0.0f,  406.0f, 0.0f },
  {  472.0f,  330.0f,  406.0f, 0.0f },
  {  314.0f,  330.0f,  456.0f, 0.0f },

  {  472.0f,    0.0f,  406.0f, 0.0f },
  {  314.0f,  330.0f,  456.0f, 0.0f },
  {  314.0f,    0.0f,  456.0f, 0.0f },

  {  314.0f,    0.0f,  456.0f, 0.0f },
  {  314.0f,  330.0f,  456.0f, 0.0f },
  {  265.0f,  330.0f,  296.0f, 0.0f },

  {  314.0f,    0.0f,  456.0f, 0.0f },
  {  265.0f,  330.0f,  296.0f, 0.0f },
  {  265.0f,    0.0f,  296.0f, 0.0f },

  {  265.0f,    0.0f,  296.0f, 0.0f },
  {  265.0f,  330.0f,  296.0f, 0.0f },
  {  423.0f,  330.0f,  247.0f, 0.0f },

  {  265.0f,    0.0f,  296.0f, 0.0f },
  {  423.0f,  330.0f,  247.0f, 0.0f },
  {  423.0f,    0.0f,  247.0f, 0.0f },

  // Ceiling light -- emmissive
  {  343.0f,  548.6f,  227.0f, 0.0f },
  {  213.0f,  548.6f,  227.0f, 0.0f },
  {  213.0f,  548.6f,  332.0f, 0.0f },

  {  343.0f,  548.6f,  227.0f, 0.0f },
  {  213.0f,  548.6f,  332.0f, 0.0f },
  {  343.0f,  548.6f,  332.0f, 0.0f }
};

const int mat_indices[] = {
    0, 0,                          // Floor         -- white lambert
    0, 0,                          // Ceiling       -- white lambert
    0, 0,                          // Back wall     -- white lambert
    1, 1,                          // Right wall    -- green lambert
    2, 2,                          // Left wall     -- red lambert
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  // Short block   -- white lambert
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  // Tall block    -- white lambert
    3, 3                           // Ceiling light -- emissive
};


const Material materials[] = {
  mk_material({1.0f, 1.0f, 1.0f}, false),
  mk_material({0.0f, 1.0f, 0.0f}, false),
  mk_material({1.0f, 0.0f, 0.0f}, false),
  mk_material({1.0f, 1.0f, 1.0f}, true)
};
